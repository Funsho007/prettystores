<h1>Available Products</h1>

<div class="search-form">
  <%= search_form_for @q, url: search_products_path, method: :get do |f| %>
    <div class="field">
      <%= f.label :name_or_description_cont, "Keyword" %>
      <%= f.search_field :name_or_description_cont %>
    </div>
    <div class="field">
      <%= f.label :category_id_eq, "Category" %>
      <%= f.collection_select :category_id_eq, @categories, :id, :name, include_blank: "All Categories" %>
    </div>
    <div class="actions">
      <%= f.submit "Search" %>
    </div>
  <% end %>
</div>

<div class="filters">
  <%= link_to 'On Sale', on_sale_products_path %> |
  <%= link_to 'New Arrivals', new_arrivals_products_path %> |
  <%= link_to 'Recently Updated', recently_updated_products_path %>
</div>

<div class="categories">
  <h2>Categories</h2>
  <ul>
    <% @categories.each do |category| %>
      <li><%= link_to category.name, category_path(category) %></li>
    <% end %>
  </ul>
</div>

<div class="products">
  <% @products.each do |product| %>
    <div class="product">
      <h2><%= link_to product.name, product_path(product) %></h2>
      <p><%= product.description %></p>
      <p>Price: <%= number_to_currency(product.price) %></p>
      <p><%= 'On Sale!' if product.on_sale_status %></p>
    </div>
  <% end %>
</div>

<div class="pagination">
  <%= paginate @products %>
</div>
